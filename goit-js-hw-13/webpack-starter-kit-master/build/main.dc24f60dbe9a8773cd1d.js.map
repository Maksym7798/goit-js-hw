{"version":3,"sources":["webpack:///./form.hbs","webpack:///./index.js","webpack:///./apiService.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","queryText","search","currentPage","callback","fetch","SEARCH","then","response","json","catch","error","refs","body","document","querySelector","innerHTML","form","gallery","searchForm","loadButton","numberPage","toDo","images","hits","length","delay","markupList","reduce","acc","el","webformatURL","largeImageURL","likes","views","comments","downloads","insertAdjacentHTML","markup","classList","add","window","scrollBy","top","innerHeight","behavior","addEventListener","api","debounce","target","value","dataset","large","basicLightbox","show"],"mappings":"gFAAA,IAAIA,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,SAAW,CAAC,EAAE,YAAY,KAAO,SAASC,EAAUC,EAAOC,EAAQC,EAASC,GACzI,MAAO,wMACT,SAAU,K,uDCeRC,E,qBCdW,G,wCAAA,SAAUC,EAAQC,EAAaC,GAE1CC,MADUC,yEAAeH,EAAY,MAAMD,EAAO,uDAEjDK,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAP,GAAI,OAAII,EAASJ,MACtBU,OAAM,SAAAC,GAAK,OAAIA,O,mEDCdC,EAAO,CACXC,KAAMC,SAASC,cAAc,QAC7BnB,UAAYkB,SAASC,cAAc,cAAcC,UAAYC,MAC7DC,QAASJ,SAASC,cAAc,YAChCI,WAAYL,SAASC,cAAc,gBACnCK,WAAYN,SAASC,cAAc,UAIjCM,EAAa,EAoBjB,SAASC,EAAKtB,GACZ,IAAMuB,EAASvB,EAAKwB,KACA,GAAjBD,EAAOE,SACRd,gBAAM,wBAAwBe,MAAQ,QAS1C,SAAgB1B,GACd,IAAM2B,EAAa3B,EAAK4B,QAAO,SAACC,EAAIC,GAAQ,OAAOD,EAAG,wLAEoBC,EAAGC,aAFpB,iBAEiDD,EAAGE,cAFpD,oYAOWF,EAAGG,MAPd,yVAWWH,EAAGI,MAXd,sVAeWJ,EAAGK,SAfd,6VAmBWL,EAAGM,UAnBd,8RAuBU,IACnExB,EAAKM,QAAQmB,mBAAmB,YAAaV,GAhC7CW,CAAOf,GACPX,EAAKQ,WAAWmB,UAAUC,IAAI,WAC3BnB,EAAa,GAkChBoB,OAAOC,SAAS,CACdC,IAAKF,OAAOG,YACZC,SAAU,WA7DdjC,EAAKQ,WAAW0B,iBAAiB,SAiEjC,WACEzB,IACA0B,EAAI9C,EAAWoB,EAAYC,MAlE7BV,EAAKO,WAAW2B,iBAAiB,QAASE,KAG1C,YAA6B,IAAVC,EAAU,EAAVA,OACbA,EAAOC,MAAMzB,OAAS,IAErBwB,EAAOC,OAASjD,IACjBW,EAAKM,QAAQF,UAAY,GACzBK,EAAa,GAGfpB,EAAYgD,EAAOC,MACnB7B,IACA0B,EAAI9C,EAAWoB,EAAYC,MAb6B,MAC5DV,EAAKM,QAAQ4B,iBAAiB,SAoE9B,YAA0B,IAARG,EAAQ,EAARA,OAChB,GAAGA,EAAOE,QAAQC,MAAM,CACLC,SAAA,aACFJ,EAAOE,QAAQC,MADb,MAGRE,Y","file":"main.dc24f60dbe9a8773cd1d.js","sourcesContent":["var Handlebars = require(\"../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<form class=\\\"search-form\\\" id=\\\"search-form\\\">\\n  <input\\n    type=\\\"text\\\"\\n    name=\\\"query\\\"\\n    autocomplete=\\\"off\\\"\\n    placeholder=\\\"Search images...\\\"\\n  />\\n</form>\\n\\n<ul class=\\\"gallery\\\">\\n\\n</ul>\";\n},\"useData\":true});","import form from './form.hbs';\nimport './index.css';\nimport '../node_modules/basiclightbox/dist/basicLightbox.min.css'\nimport api from './apiService.js';\nimport debounce from 'lodash.debounce';\nimport { error } from '@pnotify/core';\nimport '@pnotify/core/dist/PNotify.css';\nimport '@pnotify/core/dist/BrightTheme.css';\nimport * as basicLightbox from '../node_modules/basiclightbox/dist/basicLightbox.min.js';\n\n\nconst refs = {\n  body: document.querySelector('body'),\n  container: (document.querySelector('.container').innerHTML = form()),\n  gallery: document.querySelector('.gallery'),\n  searchForm: document.querySelector('#search-form'),\n  loadButton: document.querySelector('.load'),\n};\n\nlet queryText;\nlet numberPage = 0;\n\nrefs.loadButton.addEventListener('click', loadMore);\nrefs.searchForm.addEventListener('input', debounce(onInput, 500));\nrefs.gallery.addEventListener('click', goModal);\n\nfunction onInput({ target }) {\n  if (target.value.length > 0) {\n\n    if(target.value != queryText){\n      refs.gallery.innerHTML = '';\n      numberPage = 0;\n    };\n\n    queryText = target.value;\n    numberPage++;\n    api(queryText, numberPage, toDo);\n  };\n};\n\nfunction toDo(data) {\n  const images = data.hits;\n  if(images.length == 0){\n    error('Enter correct query!').delay = '2000';\n  };\n  markup(images);\n  refs.loadButton.classList.add('visible');\n  if(numberPage > 1){\n    scroll()\n  };\n}\n\nfunction markup(data) {\n  const markupList = data.reduce((acc,el) => {return acc + `<li class=\"item\">\n                                                              <div class=\"photo-card\">\n                                                                <img src=\"${el.webformatURL}\" data-large=\"${el.largeImageURL}\" alt=\"\" data-action=\"photo\"/>\n\n                                                                <div class=\"stats\">\n                                                                  <p class=\"stats-item\">\n                                                                    <i class=\"material-icons\">thumb_up</i>\n                                                                    ${el.likes}\n                                                                  </p>\n                                                                  <p class=\"stats-item\">\n                                                                    <i class=\"material-icons\">visibility</i>\n                                                                    ${el.views}\n                                                                  </p>\n                                                                  <p class=\"stats-item\">\n                                                                    <i class=\"material-icons\">comment</i>\n                                                                    ${el.comments}\n                                                                  </p>\n                                                                  <p class=\"stats-item\">\n                                                                    <i class=\"material-icons\">cloud_download</i>\n                                                                    ${el.downloads}\n                                                                  </p>\n                                                                </div>\n                                                              </div>\n                                                            </li>`}, '');\n  refs.gallery.insertAdjacentHTML('beforeend', markupList);\n}\n\nfunction scroll() {\n  window.scrollBy({\n    top: window.innerHeight,\n    behavior: 'smooth'\n  });\n}\n\nfunction loadMore(){\n  numberPage++;\n  api(queryText, numberPage, toDo);\n}\n\nfunction goModal({target}){\n  if(target.dataset.large){\n    const instance = basicLightbox.create(\n      `<img src=\"${target.dataset.large}\">`\n    );\n    instance.show();\n  }\n}","const KEY = '16353844-963e1a93bb506934b430703c5';\nconst SEARCH = 'https://pixabay.com/api/?image_type=photo&orientation=horizontal&';\nconst PER_PAGE = 12;\n\n\nexport default function (search, currentPage, callback){\n  const URL = SEARCH+'page='+currentPage+'&q='+search+'&per_page='+PER_PAGE+'&key='+KEY;\n    fetch(URL)\n    .then(response => response.json())\n    .then(data => callback(data))\n    .catch(error => error);\n};"],"sourceRoot":""}